<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Currency Converter</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    color: #2c3e50;
  }
  
  .converter-container {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    box-shadow: 0 32px 64px rgba(0, 0, 0, 0.15);
    max-width: 520px;
    width: 100%;
    padding: 40px;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }
  
  .header {
    text-align: center;
    margin-bottom: 32px;
  }
  
  .header h1 {
    font-size: 2.2rem;
    font-weight: 700;
    background: linear-gradient(135deg, #667eea, #764ba2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 8px;
  }
  
  .header p {
    color: #6b7280;
    font-size: 1rem;
  }
  
  .form-group {
    margin-bottom: 24px;
  }
  
  .form-group label {
    display: block;
    font-weight: 600;
    color: #374151;
    margin-bottom: 8px;
    font-size: 0.95rem;
  }
  
  .amount-input {
    width: 100%;
    padding: 16px 20px;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 500;
    transition: all 0.2s ease;
    background: #fafafa;
  }
  
  .amount-input:focus {
    outline: none;
    border-color: #667eea;
    background: white;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  }
  
  .currency-select {
    width: 100%;
    padding: 14px 16px;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    font-size: 0.95rem;
    background: #fafafa;
    transition: all 0.2s ease;
    cursor: pointer;
  }
  
  .currency-select:focus {
    outline: none;
    border-color: #667eea;
    background: white;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  }
  
  .currency-select[multiple] {
    height: 160px;
    overflow-y: auto;
    padding: 8px;
  }
  
  .currency-select[multiple] option {
    padding: 8px 12px;
    border-radius: 6px;
    margin: 2px 0;
  }
  
  .currency-select[multiple] option:checked {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
  }
  
  .convert-btn {
    width: 100%;
    padding: 16px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    margin-top: 8px;
  }
  
  .convert-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
  }
  
  .convert-btn:active {
    transform: translateY(0);
  }
  
  .convert-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }
  
  .results-section {
    margin-top: 32px;
  }
  
  .results-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 16px;
    display: none;
  }
  
  .results-container {
    max-height: 300px;
    overflow-y: auto;
    border-radius: 12px;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
  }
  
  .result-item {
    padding: 16px 20px;
    border-bottom: 1px solid #e2e8f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background 0.2s ease;
  }
  
  .result-item:last-child {
    border-bottom: none;
  }
  
  .result-item:hover {
    background: #f1f5f9;
  }
  
  .result-from, .result-to {
    display: flex;
    align-items: center;
    font-weight: 500;
  }
  
  .result-from {
    color: #6b7280;
  }
  
  .result-to {
    color: #059669;
    font-weight: 600;
  }
  
  .currency-flag {
    margin-right: 8px;
    font-size: 1.2rem;
  }
  
  .equals-sign {
    color: #9ca3af;
    font-weight: 400;
    margin: 0 12px;
  }
  
  .error-message {
    background: #fef2f2;
    border: 1px solid #fecaca;
    color: #dc2626;
    padding: 12px 16px;
    border-radius: 8px;
    margin-top: 16px;
    font-weight: 500;
  }
  
  .loading {
    text-align: center;
    color: #6b7280;
    padding: 20px;
  }
  
  .swap-btn {
    background: #f3f4f6;
    border: 2px solid #e5e7eb;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 16px auto;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  
  .swap-btn:hover {
    background: #e5e7eb;
    transform: rotate(180deg);
  }
  
  @media (max-width: 640px) {
    .converter-container {
      padding: 24px;
      margin: 10px;
    }
    
    .header h1 {
      font-size: 1.8rem;
    }
  }
</style>
</head>
<body>
<div class="converter-container">
  <div class="header">
    <h1>Currency Converter</h1>
    <p>Real-time exchange rates for travelers</p>
  </div>
  
  <div class="form-group">
    <label for="amount">Amount</label>
    <input type="number" id="amount" class="amount-input" min="0" step="any" placeholder="Enter amount" value="1" />
  </div>
  
  <div class="form-group">
    <label for="fromCurrency">From</label>
    <select id="fromCurrency" class="currency-select">
      <option value="">Loading currencies...</option>
    </select>
  </div>
  
  <div class="swap-btn" id="swapBtn" title="Swap currencies">
    â‡…
  </div>
  
  <div class="form-group">
    <label for="toCurrency">To (hold Ctrl/Cmd to select multiple)</label>
    <select id="toCurrency" class="currency-select" multiple>
      <option value="">Loading currencies...</option>
    </select>
  </div>
  
  <button id="convertBtn" class="convert-btn">Convert Currency</button>
  
  <div class="results-section">
    <div class="results-title" id="resultsTitle">Conversion Results</div>
    <div class="results-container" id="resultsContainer" style="display: none;"></div>
    <div id="errorMessage"></div>
  </div>
</div>

<script>
const API_URL = 'https://open.er-api.com/v6/latest/';

// Popular currencies with complete info
const currencyInfo = {
  "USD": { name: "US Dollar", symbol: "$", countryCode: "US" },
  "EUR": { name: "Euro", symbol: "â‚¬", countryCode: "EU" },
  "GBP": { name: "British Pound", symbol: "Â£", countryCode: "GB" },
  "JPY": { name: "Japanese Yen", symbol: "Â¥", countryCode: "JP" },
  "AUD": { name: "Australian Dollar", symbol: "A$", countryCode: "AU" },
  "CAD": { name: "Canadian Dollar", symbol: "C$", countryCode: "CA" },
  "CHF": { name: "Swiss Franc", symbol: "CHF", countryCode: "CH" },
  "CNY": { name: "Chinese Yuan", symbol: "Â¥", countryCode: "CN" },
  "SEK": { name: "Swedish Krona", symbol: "kr", countryCode: "SE" },
  "NZD": { name: "New Zealand Dollar", symbol: "NZ$", countryCode: "NZ" },
  "MXN": { name: "Mexican Peso", symbol: "$", countryCode: "MX" },
  "SGD": { name: "Singapore Dollar", symbol: "S$", countryCode: "SG" },
  "HKD": { name: "Hong Kong Dollar", symbol: "HK$", countryCode: "HK" },
  "NOK": { name: "Norwegian Krone", symbol: "kr", countryCode: "NO" },
  "KRW": { name: "South Korean Won", symbol: "â‚©", countryCode: "KR" },
  "TRY": { name: "Turkish Lira", symbol: "â‚º", countryCode: "TR" },
  "RUB": { name: "Russian Ruble", symbol: "â‚½", countryCode: "RU" },
  "INR": { name: "Indian Rupee", symbol: "â‚¹", countryCode: "IN" },
  "BRL": { name: "Brazilian Real", symbol: "R$", countryCode: "BR" },
  "ZAR": { name: "South African Rand", symbol: "R", countryCode: "ZA" },
  "PLN": { name: "Polish Zloty", symbol: "zÅ‚", countryCode: "PL" },
  "DKK": { name: "Danish Krone", symbol: "kr", countryCode: "DK" },
  "CZK": { name: "Czech Koruna", symbol: "KÄ", countryCode: "CZ" },
  "HUF": { name: "Hungarian Forint", symbol: "Ft", countryCode: "HU" },
  "ILS": { name: "Israeli Shekel", symbol: "â‚ª", countryCode: "IL" },
  "CLP": { name: "Chilean Peso", symbol: "$", countryCode: "CL" },
  "PHP": { name: "Philippine Peso", symbol: "â‚±", countryCode: "PH" },
  "AED": { name: "UAE Dirham", symbol: "Ø¯.Ø¥", countryCode: "AE" },
  "COP": { name: "Colombian Peso", symbol: "$", countryCode: "CO" },
  "SAR": { name: "Saudi Riyal", symbol: "ï·¼", countryCode: "SA" },
  "MYR": { name: "Malaysian Ringgit", symbol: "RM", countryCode: "MY" },
  "RON": { name: "Romanian Leu", symbol: "lei", countryCode: "RO" },
  "BGN": { name: "Bulgarian Lev", symbol: "Ð»Ð²", countryCode: "BG" },
  "HRK": { name: "Croatian Kuna", symbol: "kn", countryCode: "HR" },
  "ISK": { name: "Icelandic Krona", symbol: "kr", countryCode: "IS" },
  "THB": { name: "Thai Baht", symbol: "à¸¿", countryCode: "TH" },
  "IDR": { name: "Indonesian Rupiah", symbol: "Rp", countryCode: "ID" },
  "TWD": { name: "Taiwan Dollar", symbol: "NT$", countryCode: "TW" },
  "VND": { name: "Vietnamese Dong", symbol: "â‚«", countryCode: "VN" },
  "UAH": { name: "Ukrainian Hryvnia", symbol: "â‚´", countryCode: "UA" },
  "EGP": { name: "Egyptian Pound", symbol: "Â£", countryCode: "EG" },
  "QAR": { name: "Qatari Riyal", symbol: "ï·¼", countryCode: "QA" },
  "KWD": { name: "Kuwaiti Dinar", symbol: "KD", countryCode: "KW" },
  "BHD": { name: "Bahraini Dinar", symbol: ".Ø¯.Ø¨", countryCode: "BH" },
  "OMR": { name: "Omani Rial", symbol: "ï·¼", countryCode: "OM" },
  "JOD": { name: "Jordanian Dinar", symbol: "JD", countryCode: "JO" },
  "LBP": { name: "Lebanese Pound", symbol: "Â£", countryCode: "LB" },
  "PKR": { name: "Pakistani Rupee", symbol: "â‚¨", countryCode: "PK" },
  "LKR": { name: "Sri Lankan Rupee", symbol: "â‚¨", countryCode: "LK" },
  "BDT": { name: "Bangladeshi Taka", symbol: "à§³", countryCode: "BD" },
  "NPR": { name: "Nepalese Rupee", symbol: "â‚¨", countryCode: "NP" },
  "MMK": { name: "Myanmar Kyat", symbol: "K", countryCode: "MM" },
  "KHR": { name: "Cambodian Riel", symbol: "áŸ›", countryCode: "KH" },
  "LAK": { name: "Laotian Kip", symbol: "â‚­", countryCode: "LA" }
};

function countryCodeToFlagEmoji(countryCode) {
  if (!countryCode) return 'ðŸŒ';
  if (countryCode === 'EU') return 'ðŸ‡ªðŸ‡º';
  try {
    const codePoints = countryCode
      .toUpperCase()
      .split('')
      .map(char => 127397 + char.charCodeAt());
    return String.fromCodePoint(...codePoints);
  } catch {
    return 'ðŸŒ';
  }
}

const fromCurrency = document.getElementById('fromCurrency');
const toCurrency = document.getElementById('toCurrency');
const amountInput = document.getElementById('amount');
const convertBtn = document.getElementById('convertBtn');
const resultsContainer = document.getElementById('resultsContainer');
const resultsTitle = document.getElementById('resultsTitle');
const errorMessage = document.getElementById('errorMessage');
const swapBtn = document.getElementById('swapBtn');

async function fetchCurrencies() {
  try {
    convertBtn.disabled = true;
    convertBtn.textContent = 'Loading...';
    
    const response = await fetch(API_URL + 'USD');
    const data = await response.json();
    
    if (data.result !== "success") {
      throw new Error('Failed to load currencies');
    }

    // Clear existing options
    fromCurrency.innerHTML = '';
    toCurrency.innerHTML = '';

    // Get available currencies that we have info for
    const availableCurrencies = Object.keys(data.rates)
      .filter(currency => currencyInfo[currency])
      .sort();

    // Populate dropdowns
    availableCurrencies.forEach(currency => {
      const info = currencyInfo[currency];
      const flag = countryCodeToFlagEmoji(info.countryCode);
      const displayText = `${flag} ${currency} - ${info.name}`;

      // From currency option
      const optionFrom = document.createElement('option');
      optionFrom.value = currency;
      optionFrom.textContent = displayText;
      fromCurrency.appendChild(optionFrom);

      // To currency option
      const optionTo = document.createElement('option');
      optionTo.value = currency;
      optionTo.textContent = displayText;
      toCurrency.appendChild(optionTo);
    });

    // Set default values
    fromCurrency.value = 'USD';
    
    // Select some popular currencies by default
    const defaultToCurrencies = ['EUR', 'GBP', 'JPY'];
    Array.from(toCurrency.options).forEach(option => {
      if (defaultToCurrencies.includes(option.value)) {
        option.selected = true;
      }
    });

    convertBtn.disabled = false;
    convertBtn.textContent = 'Convert Currency';

  } catch (error) {
    console.error('Error loading currencies:', error);
    showError('Failed to load currencies. Please refresh the page and try again.');
    convertBtn.disabled = true;
  }
}

async function convertCurrency() {
  const amount = parseFloat(amountInput.value);
  const from = fromCurrency.value;
  const toOptions = Array.from(toCurrency.selectedOptions).map(opt => opt.value);

  clearResults();

  // Validation
  if (isNaN(amount) || amount <= 0) {
    showError('Please enter a valid amount greater than zero.');
    return;
  }

  if (!from) {
    showError('Please select a "From" currency.');
    return;
  }

  if (toOptions.length === 0) {
    showError('Please select at least one "To" currency.');
    return;
  }

  try {
    convertBtn.disabled = true;
    convertBtn.textContent = 'Converting...';

    const response = await fetch(API_URL + from);
    const data = await response.json();

    if (data.result !== "success") {
      throw new Error('Failed to fetch exchange rates');
    }

    displayResults(amount, from, toOptions, data.rates);

  } catch (error) {
    console.error('Conversion error:', error);
    showError('Failed to convert currency. Please try again.');
  } finally {
    convertBtn.disabled = false;
    convertBtn.textContent = 'Convert Currency';
  }
}

function displayResults(amount, from, toOptions, rates) {
  let resultsHTML = '';

  toOptions.forEach(to => {
    const fromInfo = currencyInfo[from];
    const toInfo = currencyInfo[to];
    
    if (!fromInfo || !toInfo) return;

    const fromFlag = countryCodeToFlagEmoji(fromInfo.countryCode);
    const toFlag = countryCodeToFlagEmoji(toInfo.countryCode);

    if (to === from) {
      resultsHTML += `
        <div class="result-item">
          <div class="result-from">
            <span class="currency-flag">${fromFlag}</span>
            ${amount.toFixed(6)} ${fromInfo.symbol}
          </div>
          <div class="equals-sign">=</div>
          <div class="result-to">
            <span class="currency-flag">${toFlag}</span>
            ${amount.toFixed(6)} ${toInfo.symbol}
          </div>
        </div>
      `;
    } else {
      const rate = rates[to];
      if (rate) {
        const convertedAmount = amount * rate;
        resultsHTML += `
          <div class="result-item">
            <div class="result-from">
              <span class="currency-flag">${fromFlag}</span>
              ${amount.toFixed(6)} ${fromInfo.symbol}
            </div>
            <div class="equals-sign">=</div>
            <div class="result-to">
              <span class="currency-flag">${toFlag}</span>
              ${convertedAmount.toFixed(6)} ${toInfo.symbol}
            </div>
          </div>
        `;
      }
    }
  });

  if (resultsHTML) {
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
    resultsTitle.style.display = 'block';
  }
}

function showError(message) {
  errorMessage.innerHTML = `<div class="error-message">${message}</div>`;
}

function clearResults() {
  errorMessage.innerHTML = '';
  resultsContainer.style.display = 'none';
  resultsTitle.style.display = 'none';
}

function swapCurrencies() {
  const fromValue = fromCurrency.value;
  const toSelected = Array.from(toCurrency.selectedOptions).map(opt => opt.value);
  
  if (fromValue && toSelected.length > 0) {
    fromCurrency.value = toSelected[0];
    
    // Clear all selections
    Array.from(toCurrency.options).forEach(option => {
      option.selected = false;
    });
    
    // Select the previous "from" currency
    Array.from(toCurrency.options).forEach(option => {
      if (option.value === fromValue) {
        option.selected = true;
      }
    });
  }
}

// Event listeners
convertBtn.addEventListener('click', convertCurrency);
swapBtn.addEventListener('click', swapCurrencies);

amountInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') {
    convertCurrency();
  }
});

// Initialize
fetchCurrencies();
</script>
</body>
</html>